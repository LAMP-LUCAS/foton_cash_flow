<%# plugins/foton_cash_flow/app/views/foton_cash_flow/entries/_filters_modal.html.erb %>

<%# Container para o contador de lançamentos %>
<div class="cf-entries-count"><%= l('foton_cash_flow.notices.showing_entries', count: @issues_for_table.size, total: @issue_count) %></div>
<%# Container para os filtros ativos %>
<div class="cf-filters-bar">
  <div class="cf-active-filters-container">
    <span class="cf-active-filters-label"><%= l('foton_cash_flow.filters.active_filters_label') %></span>
    <div class="cf-active-filters"></div>
    <button class="cf-clear-all-filters cf-btn cf-btn-outline" style="display: none;"><%= l('foton_cash_flow.filters.clear_all_button') %></button>
  </div>
</div>

<%# Template para o modal de filtros %>
<template id="filter-modal-template">
  <div class="cf-filter-modal">
    <div class="cf-filter-modal-inner">
      <div class="cf-filter-header">
        <h5 class="cf-filter-title"></h5>
        <button class="cf-close-modal-btn">&times;</button>
      </div>
      <div class="cf-filter-body">
        <%# Filtro de Texto (String) %>
        <div class="cf-filter-group" data-type="string">
          <label class="cf-filter-field">
            <select class="cf-filter-operator">
              <option value="contains"><%= l('foton_cash_flow.filters.operators.contains') %></option>
              <option value="starts_with"><%= l('foton_cash_flow.filters.operators.starts_with') %></option>
              <option value="ends_with"><%= l('foton_cash_flow.filters.operators.ends_with') %></option>
              <option value="equal"><%= l('foton_cash_flow.filters.operators.is') %></option>
              <option value="is_empty"><%= l('foton_cash_flow.filters.operators.is_empty') %></option>
              <option value="is_not_empty"><%= l('foton_cash_flow.filters.operators.is_not_empty') %></option>
            </select>
            <input type="text" class="cf-filter-input" placeholder="<%= l('foton_cash_flow.filters.placeholders.type_a_value') %>">
          </label>
        </div>

        <%# Filtro de Número (Number/Value) %>
        <div class="cf-filter-group" data-type="number value">
          <label class="cf-filter-field">
            <select class="cf-filter-operator">
              <option value="equal"><%= l('foton_cash_flow.filters.operators.is') %></option>
              <option value="greater_than"><%= l('foton_cash_flow.filters.operators.greater_than') %></option>
              <option value="less_than"><%= l('foton_cash_flow.filters.operators.less_than') %></option>
              <option value="between"><%= l('foton_cash_flow.filters.operators.between') %></option>
              <option value="is_empty"><%= l('foton_cash_flow.filters.operators.is_empty') %></option>
              <option value="is_not_empty"><%= l('foton_cash_flow.filters.operators.is_not_empty') %></option>
            </select>
          </label>
          <div class="cf-filter-number-inputs">
            <input type="number" name="filter_value_1" class="cf-filter-input" placeholder="<%= l('foton_cash_flow.filters.placeholders.min_value') %>">
            <span class="cf-filter-and" style="display: none;"><%= l('foton_cash_flow.general.and') %></span>
            <input type="number" name="filter_value_2" class="cf-filter-input between-field" placeholder="<%= l('foton_cash_flow.filters.placeholders.max_value') %>" style="display: none;">
          </div>
        </div>

        <%# Filtro de Data (Date) %>
        <div class="cf-filter-group" data-type="date">
          <label class="cf-filter-field">
            <select class="cf-filter-operator">
              <option value="equal"><%= l('foton_cash_flow.filters.operators.is') %></option>
              <option value="before"><%= l('foton_cash_flow.filters.operators.before') %></option>
              <option value="after"><%= l('foton_cash_flow.filters.operators.after') %></option>
              <option value="between"><%= l('foton_cash_flow.filters.operators.between_dates') %></option>
              <option value="is_empty"><%= l('foton_cash_flow.filters.operators.is_empty') %></option>
              <option value="is_not_empty"><%= l('foton_cash_flow.filters.operators.is_not_empty') %></option>
            </select>
          </label>
          <div class="cf-filter-date-inputs">
            <input type="date" name="filter_date_1" class="cf-filter-input">
            <span class="cf-filter-and" style="display: none;"><%= l('foton_cash_flow.general.and') %></span>
            <input type="date" name="filter_date_2" class="cf-filter-input between-field" style="display: none;">
          </div>
        </div>

        <%# Filtro de Status %>
        <div class="cf-filter-group" data-type="status">
          <label class="cf-filter-field">
            <select class="cf-filter-operator">
              <option value="is"><%= l('foton_cash_flow.filters.operators.is') %></option>
              <option value="is_not"><%= l('foton_cash_flow.filters.operators.is_not') %></option>
              <option value="is_empty"><%= l('foton_cash_flow.filters.operators.is_empty') %></option>
              <option value="is_not_empty"><%= l('foton_cash_flow.filters.operators.is_not_empty') %></option>
            </select>
          </label>
          <div class="cf-filter-checkbox-container">
            <% if defined?(@statuses) && @statuses.present? %>
              <% @statuses.each do |status| %>
                <label class="cf-checkbox-label">
                  <input type="checkbox" class="cf-filter-checkbox" value="<%= status.name %>">
                  <span><%= l("foton_cash_flow.cf_options.#{status.name.to_s.parameterize.underscore}", default: status.name) %></span>
                </label>
              <% end %>
            <% end %>
          </div>
        </div>

        <%# Filtro de Categoria %>
        <div class="cf-filter-group" data-type="category">
          <label class="cf-filter-field">
            <select class="cf-filter-operator">
              <option value="is"><%= l('foton_cash_flow.filters.operators.is') %></option>
              <option value="is_not"><%= l('foton_cash_flow.filters.operators.is_not') %></option>
              <option value="contains"><%= l('foton_cash_flow.filters.operators.contains') %></option>
              <option value="is_empty"><%= l('foton_cash_flow.filters.operators.is_empty') %></option>
              <option value="is_not_empty"><%= l('foton_cash_flow.filters.operators.is_not_empty') %></option>
            </select>
          </label>
          <div class="cf-filter-checkbox-container">
            <% if defined?(@categories) && @categories.present? %>
              <% @categories.each do |category| %>
                <label class="cf-checkbox-label">
                  <input type="checkbox" class="cf-filter-checkbox" value="<%= category %>">
                  <span><%= l("foton_cash_flow.cf_options.#{category.to_s.parameterize.underscore}", default: category) %></span>
                </label>
              <% end %>
            <% end %>
          </div>
        </div>
        
        <%# Filtro de Tipo de Transação %>
        <div class="cf-filter-group" data-type="transaction">
          <label class="cf-filter-field">
            <select class="cf-filter-operator">
              <option value="is"><%= l('foton_cash_flow.filters.operators.is') %></option>
              <option value="is_not"><%= l('foton_cash_flow.filters.operators.is_not') %></option>
              <option value="is_empty"><%= l('foton_cash_flow.filters.operators.is_empty') %></option>
              <option value="is_not_empty"><%= l('foton_cash_flow.filters.operators.is_not_empty') %></option>
            </select>
          </label>
          <div class="cf-filter-checkbox-container">
            <label class="cf-checkbox-label">
              <input type="checkbox" class="cf-filter-checkbox" value="revenue">
              <span><%= l('foton_cash_flow.cf_options.revenue') %></span>
            </label>
            <label class="cf-checkbox-label">
              <input type="checkbox" class="cf-filter-checkbox" value="expense">
              <span><%= l('foton_cash_flow.cf_options.expense') %></span>
            </label>
          </div>
        </div>
      </div>
      <div class="cf-filter-actions">
        <button class="cf-apply-filter-btn cf-btn cf-btn-primary"><%= l('foton_cash_flow.general.apply') %></button>
        <button class="cf-clear-filter-btn cf-btn cf-btn-outline"><%= l('foton_cash_flow.general.clear') %></button>
      </div>
    </div>
  </div>
</template>